<!DOCTYPE html>
<html>
  <head>
    <title>Single Product</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
      defer
    ></script>
  </head>
  <body>
    <div class="container mt-5">
      <header class="text-center">
        <h1 class="mb-4">Product Lookup</h1>
        <form
          method="GET"
          class="d-flex flex-wrap gap-3 justify-content-center"
          action="/single-product"
        >
          <input
            class="form-control w-25"
            type="number"
            name="id"
            id="productId"
            placeholder="Enter product ID"
            required
          />
          <button class="btn btn-primary" type="submit">Get Product</button>
        </form>
      </header>
      <main class="mt-5">

        <div>
          {% if sync_result %}
            <div class="sync-result">
              <h3>{{ sync_result.message }}</h3>

              <h4>Metafield Update Summary:</h4>
              <ul>
                {% for item in sync_result.metafield_update_summary.updated %}
                  <li>✅ Updated Variant: {{ item.variant_id }}</li>
                {% endfor %}
                {% for item in sync_result.metafield_update_summary.skipped %}
                  <li>⚠️ Skipped Variant: {{ item.variant_id }} - Reason: {{ item.reason }}</li>
                {% endfor %}
                {% for item in sync_result.metafield_update_summary.failed %}
                  <li>❌ Failed Variant: {{ item.variant_id }} - Error: {{ item.error }}</li>
                {% endfor %}
              </ul>
            </div>
          {% endif %}
        </div>
        
      </main>
    </div>
  </body>
</html>
